<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>my cart</title>

    <!-- font awesome cdn link  -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />

    <!-- custom css file link  -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header class="header">
      <section class="flex">
        <a href="home" class="logo">La Ratatouille</a>
        <div class="right">
          <nav class="navbar">
            <a href="home">Home</a>
            <a href="menu">Menu</a>
            <a href="orders">Orders</a>
          </nav>
          <div class="icons">
            <a href="cart"><i class="fas fa-shopping-cart"></i></a>
            <div id="user-btn" class="fas fa-user"></div>
            <div id="menu-btn" class="fas fa-bars"></div>
          </div>
          <div class="profile">
            <p class="name"><%= user.firstname %></p>
            <div class="flex">
              <a href="profile" class="btn">profile</a>
              <a href="logout" class="delete-btn">logout</a>
            </div>
          </div>
        </div>
      </section>
    </header>

    <div class="heading">
      <h3>shopping cart</h3>
      <p><a href="home">home </a> <span> / cart</span></p>
    </div>

    <section class="products">
      <h1 class="title">your cart</h1>
      <%if(cart && cart.length===0){%>
        <div class="box-container">
          <p>Your cart is empty!</p>
          <a href="menu" class="btn">view menu</a>
        </div>
      <%
      }
      else{
      %>
      <div class="box-container">
        <% let total = 0; if(!cart){ %>
        <div class="box">
          <div class="name">No items in cart!</div>
        </div>
        <% } else{ cart.forEach(function(cart){ total += cart.subtotal; %>
        <div class="box">
          <a href="quick_view.html" class="fas fa-eye"></a>
          <button
            class="fas fa-times"
            type="submit"
            name="delete"
            onclick="return confirm('delete this item?')"
          ></button>
          <img src="uploaded_img/pizza-1.png" alt="" />
          <div class="name"><%= cart.title %></div>
          <div class="flex">
            <div class="price"><span>BDT</span><%= cart.price %></div>
            <!-- <input
              type="number"
              name="qty"
              class="qty"                                           /// no change of quantity in cart pleaseeee :(
              min="1"
              max="99"
              value="<%= cart.quantity %>"
              onkeypress="if(this.value.length == 2) return false;"
            /> -->
            <button type="submit" class="fas fa-edit"></button>
          </div>
          <div class="sub-total">
            sub total :<span>BDT</span><%= cart.subtotal%>
          </div>
        </div>
        <% }); } %>
        <form action="/checkout" method="post" class="box">
          <div class="table_no">
            <input
              type="number"
              min="0"
              max="30"
              onkeypress="if(this.value.length == 2) return false;"
              placeholder="enter table number"
              required
              class="box"
              name="table_no"
            />
          </div>
          <div class="instruction">
            <input
              type="text"
              maxlength="255"
              name="instruction"
              placeholder="add any instruction.."
              class="box"
          />
        </div>
        <div class="cart-total">
          <p>grand total : <span>BDT</span><%=total%></p>
          <button type="submit" class="btn">Place order</button>
        </div>
      </form>
      </div>

      <div class="more-btn">
        <a
          href="clearCart"
          class="delete-btn"
          onclick="return confirm('delete all from cart?');"
          >delete all</a
        >
      </div>
      <%}%>
    </section>

    <footer class="footer">
      <section class="box-container">
        <div class="box">
          <img src="images/map-icon.png" alt="" />
          <h3>Find us in</h3>
          <a href="#">Mirpur, Dhaka</a>
          <a href="#">Anderkilla, Chittagong</a>
        </div>

        <div class="box">
          <img src="images/clock-icon.png" alt="" />
          <h3>We're open</h3>
          <p>Everyday</p>
          <p>from 07am to 10pm</p>
        </div>

        <div class="box">
          <img src="images/email-icon.png" alt="" />
          <h3>Email</h3>
          <a href="mailto:laratatoulli@gmail.com">laratatoulli@gmail.com</a>
          <a href="mailto:laratatoulli@outlook.com">laratatoulli@outlook.com</a>
        </div>

        <div class="box">
          <img src="images/phone-icon.png" alt="" />
          <h3>Phone</h3>
          <p>+880 1521-703875</p>
          <p>+880 1640-922106</p>
        </div>
      </section>

      <div class="credit">Made with ❤️ by <span>Mitu & Saif</span></div>
    </footer>

    <div class="loader">
      <img id="pizza" src="images/pizza-loading.svg" alt="loading screen" />
      <p class="loading">Loading...</p>
    </div>

    <script src="js/loader.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>
